Emorpho Software modifications:

WxGUI directory:  The original bridgeport GUI software is built to deal with a single detector, i.e. it would only look at the first emorpho it found.

MCA_Main.py
	ORIGINAL 
	#-- Here we use the first mca in the MCA_IO.mca dictionary
        self.sn = list(self.MCA_IO.mca)[0]
        self.MCA = self.MCA_IO.mca[self.sn]  
        
	CHANGED TO
	#-- Here we manually select an MCA; we will use it on all other
        #   displays by reading it from the file created here.
        print("Please select an MCA:\n")
        print(list(self.MCA_IO.mca))
        snnum = int(input('Enter a number from 0 to 3 if 4 SNs show: '))
        self.sn = list(self.MCA_IO.mca)[snnum]
        self.MCA = self.MCA_IO.mca[self.sn]

        #Save it to be used by other screens:
        with open("chosen_sn.txt",'w') as snfile:
            snfile.write(self.sn)
            snfile.close()
                
 
This displays the emorpho serial numbers in a terminal. you choose which emorpho you want to view in the GUI by selecting 0,1,2.. etc by order they are written.  It also writes the chosen serial number to a file "chosen_sn.txt" to be used by other *_wx.py scripts that need the serial number. 

All *_wx.py scripts need to be modified like the following example.  

for example: 
coin_wx.py
	ORIGINAL
	#-- Here we use the first mca in the MCA_IO.mca dictionary
        self.sn = list(self.MCA_IO.mca)[0]
        self.MCA = self.MCA_IO.mca[self.sn]  
	
	CHANGED TO
        #-- Here we use the globally chosen sn:
        with open('chosen_sn.txt','r') as snfile:
            fname = snfile.read()
            snfile.close()
        self.sn = fname
        self.MCA = self.MCA_IO.mca[self.sn]  


MDS Directory: 

list of new files not part of the orginal software tree

crontab_lines.txt  #a copy of the line commands that need to be written to both the user and root crontabs to start the MCA and lm_thor_onedet.py on boot up. 

lm_onedet.py  # communicates with MDS, and sets up parameters for trace capture and calls lm.py

lm.py   #pulls the data from emorpho buffers and writes to .txt files

sequence.sh  #shell script that when run in users crontab executes seperate instances (one for each detector in the system) of lm_thor_onedet.py on boot up.  

startmds.sh #shell script that when run in roots crontab executes mca_server.py  

test_values.py  #runs through the detectors to make sure the high voltages are correct in both the volatile and non-volatile memory

	  

	
