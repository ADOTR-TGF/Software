{
    "fpga_ctrl": {
        "self": "fpga_ctrl",
        "source": "fpga_ctrl",
        "editable": "Yes",
        "colors": {"fields": [ [176, 224, 230], [224, 255, 255] ], "user": [ [172, 225, 175], [208, 240, 192] ]},
        "displays": ["fields", "user"],
        "fields": [
            {"name": "fine_gain", "idx": "0", "min": "0x0", "max": "65535", "help": "Fine gain; digital_gain = fine_gain/2**ecomp ."},
            {"name": "baseline_threshold", "idx": "1", "min": "0", "max": "1023", "help": "Noise trigger threshold: Suspend baseline updating if abs(pulse-baseline)>baseline_threshold ."},
            {"name": "cr1_upper", "idx": "1", "min": "0", "max": "63", "help": "Unused"},
            {"name": "pulse_threshold", "idx": "2", "min": "0", "max": "1023", "help": "Trigger on (pulse-baseline)>pulse_threshold ."},
            {"name": "cr2_upper", "idx": "2", "min": "0", "max": "65535", "help": "Unused"},
            {"name": "hold_off_time", "idx": "3", "min": "0", "max": "65535", "help": "Minimum dead time after a trigger; in clock cycles. "},
            {"name": "integration_time", "idx": "4", "min": "0", "max": "65535", "help": "Number of ADC samples to be summed for the energy measurement."},
            {"name": "roi_bounds", "idx": "5", "min": "0", "max": "65535", "help": "rb=roi_bounds; E0=16*(rb & 0xFF), E1=(rb & 0xFF00)/16, ROI = [E0, E1]; cf user->roi_low, user->roi_high ."},
            {"name": "trigger_delay", "idx": "6", "min": "0", "max": "1023", "help": "Display that many ADC samples before the rising edge of a pulse; used with trace display."},
            {"name": "cr6_upper", "idx": "6", "min": "0", "max": "63", "help": "Unused"},
            {"name": "dac_data",  "idx": "7", "min": "0", "max": "65535", "help": "16-bit HV-DAC value; 65536 -> 3000V"},
            {"name": "run_time_0",  "idx": "8", "min": "0", "max": "65535", "help": "Low word of user->run_time"},
            {"name": "run_time_1",  "idx": "9", "min": "0", "max": "65535", "help": "High word of user->run_time"},
            {"name": "short_it",  "idx": "10", "min": "0", "max": "65535", "help": "Short integration time; used for pulse shape discrimination."},
            {"name": "put",  "idx": "11", "min": "0", "max": "65535", "help": "Pileup rejection parameter; cf documentation."},
            {"name": "ecomp",  "idx": "12", "min": "0", "max": "65535", "help": "Part of the digital gain."},
            {"name": "pcomp",  "idx": "12", "min": "0", "max": "65535", "help": "Added attenuation for LED events."},
            {"name": "gain_select",  "idx": "12", "min": "0", "max": "15", "help": "0, 1, 2, 4, 8 to select the input amplifier transimpedance; cf documentation."},
            {"name": "lm_mode",  "idx": "12", "min": "0", "max": "15", "help": "List mode: 0-> 16-bit energy + 32-bit time, 1->16-bit energy + 16-bit PSD + 16-bit time"},
            {"name": "cr12_upper",  "idx": "12", "min": "0", "max": "7", "help": "Reserved"},
            {"name": "sel_led",  "idx": "13", "min": "0", "max": "15", "help": "Data acquisition: 0->Normal; 1->LED only"},
            {"name": "gain_stab",  "idx": "13", "min": "0", "max": "15", "help": "Reserved"},
            {"name": "suspend", "idx": "13", "min": "0", "max": "1", "help": "Freeze: Halt all acquisition and internal time measurement"},
            {"name": "segment_enable", "idx": "13", "min": "0", "max": "1", "help": "Enable dual-bank histogramming mode."},
            {"name": "segment", "idx": "13", "min": "0", "max": "1", "help": "Select histogram bank during dual-bank histogramming mode."},
            {"name": "daq_mode",  "idx": "13", "min": "0", "max": "1", "help": "Update counting time and events: 0->Always, 1->Only while histogram is active."},
            {"name": "nai_mode",  "idx": "13", "min": "0", "max": "1", "help": "Pile up rejection mode: 0->Generic, 1->For NaI; cf documentation"},
            {"name": "temperature_disable",  "idx": "13", "min": "0", "max": "1", "help": "Reserved"},
            {"name": "opto_repeat_time",  "idx": "14", "min": "0", "max": "31", "help": "LED frequency f=40e6/2**(t+2) "},
            {"name": "opto_pulse_width",  "idx": "14", "min": "0", "max": "15", "help": "LED pulse width w=2**(w+1)/40e6"},
            {"name": "opto_pulse_sep",  "idx": "14", "min": "0", "max": "255", "help": "LED pulse width S=2**(s+1)/40e6"},
            {"name": "cr14_b13",  "idx": "14", "min": "0", "max": "1", "help": "Reserved"},
            {"name": "opto_trigger",  "idx": "14", "min": "0", "max": "1", "help": "Trigger on LED: 0->Off, 1->On"},
            {"name": "opto_enable",  "idx": "14", "min": "0", "max": "1", "help": "LED: 0->Off, 1->On"},
            
            {"name": "clear_histogram", "idx": "15", "min": "0", "max": "1", "help": "Clear histogram data; self-clearing bit"},
            {"name": "clear_statistics", "idx": "15", "min": "0", "max": "1", "help": "Clear counts data; self-clearing bit"},
            {"name": "clear_trace", "idx": "15", "min": "0", "max": "1", "help": "Reset trace acquisition; self-clearing bit"},
            {"name": "clear_list_mode", "idx": "15", "min": "0", "max": "1", "help": "Reset list mode acquisition; self-clearing bit"},
            {"name": "program_hv", "idx": "15", "min": "0", "max": "1", "help": "Reprogram the HV-DAC => update high voltage; self-clearing bit"},
            {"name": "ut_run", "idx": "15", "min": "0", "max": "1", "help": "Acquire an untriggered trace; self-clearing bit"},
            {"name": "write_nv", "idx": "15", "min": "0", "max": "1", "help": "Write to non-volatile fpga_ctrl memory; self-clearing bit"},
            {"name": "read_nv", "idx": "15", "min": "0", "max": "1", "help": "Read from non-volatile fpga_ctrl memory; self-clearing bit"},
            
            {"name": "cr15_b8",  "idx": "15", "min": "0", "max": "1", "help": "Reserved"},
            {"name": "ha_run",  "idx": "15", "min": "0", "max": "1", "help": "Measure and histogram: 0-> energy, 1->amplitude"},
            {"name": "vt_run",  "idx": "15", "min": "0", "max": "1", "help": "Acquire validated traces (ie not piled up, not out of range): 0-> On, 1->Off"},
            {"name": "trace_run",  "idx": "15", "min": "0", "max": "1", "help": "Acquire triggered traces: 0-> On, 1->Off"},
            {"name": "lm_run", "idx": "15", "min": "0", "max": "1", "help": "List mode acquisition: 0->Off, 1->On"},
            {"name": "rtlt",  "idx": "15", "min": "0", "max": "3", "help": "End histogram acquisition: 0->Never, 1->LiveTime limit, 2->RealTime limit, 3->Counts limit."},
            {"name": "run",  "idx": "15", "min": "0", "max": "1", "help": "Master data acquisition switch: 0->Off, 1->On"}
        ],
        "user": [
            {"name": "high_voltage",  "idx": "0, 12", "min": "0x0", "max": "32 bytes", "help": "High voltage HV=dac_data*3000.0/65536"}, 
            {"name": "digital_gain",  "idx": "0, 12", "min": "0x0", "max": "32 bytes", "help": "digital_gain = fine_gain/2**ecomp*adc_sr/40MHz; cf adc_sr = ADC sampling rate, ie 40MHz to 120MHz."},
            {"name": "integration_time",  "idx": "4", "min": "0.2e-6", "max": "16384e-6", "help": "Signal summing time in s."},
            {"name": "hold_off_time",  "idx": "3", "min": "0.2e-6", "max": "16384e-6", "help": "Dead time in s."},
            {"name": "short_it",  "idx": "10", "min": "0", "max": "16384e-6", "help": "Short integration time in s."},
            {"name": "trigger_delay",  "idx": "6", "min": "0.2e-6", "max": "16384e-6", "help": "Short integration time in s."},
            {"name": "baseline_threshold",  "idx": "1", "min": "0.003", "max": "0.010", "help": "Noise trigger threshold in V."},
            {"name": "pulse_threshold",  "idx": "2", "min": "0.005", "max": "0.9", "help": "Pulse trigger threshold in V."},
            {"name": "roi_low",  "idx": "5", "min": "0", "max": "255", "help": "E0 MCA bin of region of interest (ROI)"},
            {"name": "roi_high",  "idx": "5", "min": "0", "max": "255", "help": "E1 MCA bin of ROI: ROI=[E0, E1])"},
            {"name": "run_time",  "idx": "5", "min": "0", "max": "7.036e6", "help": "Run time < 2**48/adc_sr"}
        ]
    },
    "fpga_dsp": {
        "self": "fpga_dsp",
        "source": "fpga_ctrl",
        "editable": "Yes",
        "colors": {"fields": [ [176, 224, 230], [224, 255, 255] ], "user": [ [172, 225, 175], [208, 240, 192] ]},
        "displays": ["fields", "user"],
        "fields": [
            {"name": "pcomp",  "idx": "12", "min": "0", "max": "65535", "help": "Added attenuation for LED events."},
            {"name": "gain_select",  "idx": "12", "min": "0", "max": "15", "help": "0, 1, 2, 4, 8 to select the input amplifier transimpedance; cf documentation."},
            {"name": "opto_repeat_time",  "idx": "14", "min": "0", "max": "31", "help": "LED frequency f=40e6/2**(t+2) "},
            {"name": "opto_pulse_width",  "idx": "14", "min": "0", "max": "15", "help": "LED pulse width w=2**(w+1)/40e6"},
            {"name": "opto_enable",  "idx": "14", "min": "0", "max": "1", "help": "LED: 0->Off, 1->On"},
            {"name": "ha_run",  "idx": "15", "min": "0", "max": "1", "help": "Measure and histogram: 0-> energy, 1->amplitude"},
            {"name": "trace_run",  "idx": "15", "min": "0", "max": "1", "help": "Acquire traces: 0-> triggered, 1->validated"},
            {"name": "lm_run",  "idx": "15", "min": "0", "max": "1", "help": "List mode: 0-> 16-bit energy + 32-bit time, 1->16-bit energy + 16-bit PSD + 16-bit time"},
            {"name": "rtlt",  "idx": "15", "min": "0", "max": "3", "help": "End histogram acquisition: 0->Never, 1->LiveTime limit, 2->RealTime limit, 3->Counts limit."},
            {"name": "sel_led",  "idx": "15", "min": "0", "max": "1", "help": "Data acquisition: 0->Normal; 1->LED only"}
        ],
        "user": [
            {"name": "high_voltage",  "idx": "0, 12", "min": "0x0", "max": "32 bytes", "help": "High voltage HV=dac_data*3000.0/65536"}, 
            {"name": "digital_gain",  "idx": "0, 12", "min": "0x0", "max": "32 bytes", "help": "digital_gain = fine_gain/2**ecomp*40MHz/adc_sr; cf adc_sr = ADC sampling rate, ie 40MHz to 120MHz."},
            {"name": "integration_time",  "idx": "4", "min": "0.2e-6", "max": "16384e-6", "help": "Signal summing time in s."},
            {"name": "hold_off_time",  "idx": "3", "min": "0.2e-6", "max": "16384e-6", "help": "Dead time in s."},
            {"name": "short_it",  "idx": "10", "min": "0", "max": "16384e-6", "help": "Short integration time in s."},
            {"name": "trigger_delay",  "idx": "6", "min": "0.2e-6", "max": "16384e-6", "help": "Short integration time in s."},
            {"name": "pulse_threshold",  "idx": "2", "min": "0.005", "max": "0.9", "help": "Pulse trigger threshold in V."},
            {"name": "roi_low",  "idx": "2", "min": "0", "max": "255", "help": "E0 MCA bin of region of interest (ROI)"},
            {"name": "roi_high",  "idx": "2", "min": "0", "max": "255", "help": "E1 MCA bin of ROI: ROI=[E0, E1])"},
            {"name": "run_time",  "idx": "2", "min": "0", "max": "7.036e6", "help": "Run time < 2**48/adc_sr"}
        ]
    },
    "fpga_results": {
        "self": "fpga_results",
        "source": "fpga_results",
        "editable": "No",
        "colors": {"fields": [ [176, 224, 230], [224, 255, 255] ], "user": [ [172, 225, 175], [208, 240, 192] ]},
        "displays": ["fields", "user"],
        "fields": [
            {"name": "temperature", "idx": "0", "min": "-40", "max": "90", "help": "Temperature of the PMT; 13-bit raw number, LSB=1/16K"},
            {"name": "dc_offset", "idx": "1", "min": "0", "max": "65535", "help": "16-bit DC offset; 1LSB = 1/64 mV"},
            {"name": "status", "idx": "2", "min": "0", "max": "1", "help": "DAQ status register"},
            {"name": "anode_current", "idx": "3, 4", "min": "0", "max": "2**32-1", "help": "32-bit anode current word"},
            {"name": "roi_avg", "idx": "5", "min": "0", "max": "65536", "help": "uint16_t average energy deposited in ROI (16x average mca bin)"},
            {"name": "adc_sr", "idx": "6", "min": "0", "max": "15", "help": "ADC sampling rate in mega-samples per second (MHz)"},
            {"name": "sensor", "idx": "6", "min": "0", "max": "255", "help": "1-> PMT, 2->SiPM"},
            {"name": "version", "idx": "7", "min": "0", "max": "255", "help": "Firmware version"},
            {"name": "adc_bits", "idx": "7", "min": "0", "max": "15", "help": "Number of ADC bits"},
            {"name": "custom", "idx": "8", "min": "0", "max": "65535", "help": "Customization number"},
            {"name": "build", "idx": "9", "min": "0", "max": "65535", "help": "Build number increases with every release"},
            {"name": "rr_10", "idx": "10", "min": "0", "max": "65535", "help": "Results register 10, uint16_t; LED average"},
            {"name": "rr_11", "idx": "11", "min": "0", "max": "65535", "help": "Results register 11, reserved"},
            {"name": "rr_12", "idx": "12", "min": "0", "max": "65535", "help": "Results register 12, reserved"}
        ],
        "user": [
            {"name": "temperature", "idx": "0", "min": "-40", "max": "90", "help": "Temperature in degree Celsius"},
            {"name": "dc_offset", "idx": "1", "min": "0", "max": "65535", "help": "DC-offset in Volt"},
            {"name": "histo_done", "idx": "2", "min": "0", "max": "1", "help": "Histogram done"},
            {"name": "lm_done", "idx": "2", "min": "0", "max": "1", "help": "List mode acquisition complete"},
            {"name": "trace_done", "idx": "2", "min": "0", "max": "1", "help": "Trace acquisition complete"},
            {"name": "impedance", "idx": "2, 6", "min": "0", "max": "1", "help": "Transimpedance of the input amplifier in Ohms"},
            {"name": "max_volt", "idx": "2, 6", "min": "0", "max": "1", "help": "Maximum pulse height in V"},
            {"name": "max_current", "idx": "2, 6", "min": "0", "max": "1", "help": "Maximum anode pulse current in A"},
            {"name": "anode_current", "idx": "3, 4", "min": "0", "max": "1", "help": "Average anode current in A"},
            {"name": "adc_sr", "idx": "6", "min": "0", "max": "1", "help": "ADC sampling rate in Hz"}            
        ]
    },
    "count_rates": {
        "self": "count_rates",
        "source": "fpga_statistics",
        "editable": "No",
        "colors": {"bank_0": [ [176, 224, 230], [224, 255, 255] ], "bank_1": [ [172, 225, 175], [208, 240, 192] ]},
        "displays": ["bank_0", "bank_1"],
        "bank_0": [
            {"name": "run_time", "idx": "0", "min": "0", "max": "", "help": "Run time since last 'clear_statistics'"},
            {"name": "dead_time", "idx": "3", "min": "0", "max": "0", "help": "Dead time since last 'clear_statistics'"},
            {"name": "event_rate", "idx": "1", "min": "0", "max": "4Mcps", "help": "Histogramming rate, cumulative since last 'clear_statistics'"},
            {"name": "event_rate_err", "idx": "1", "min": "0", "max": "4Mcps", "help": "2-sigma error of the histogramming rate"},
            {"name": "trigger_rate", "idx": "2", "min": "0", "max": "4Mcps", "help": "Rate of recognized triggers, cumulative since last 'clear_statistics'"},
            {"name": "trigger_rate_err", "idx": "2", "min": "0", "max": "4Mcps", "help": "2-sigma error of the rate of recognized triggers"},
            {"name": "pulse_rate", "idx": "2,3", "min": "0", "max": "4Mcps", "help": "Estimated true pulse rate, cumulative since last 'clear_statistics'"},
            {"name": "pulse_rate_err", "idx": "2,3", "min": "0", "max": "4Mcps", "help": "2-sigma error of the estimated true pulse rate"},
            {"name": "xev0_rate", "idx": "2,3", "min": "0", "max": "4Mcps", "help": "External count rate; counter 0"},
            {"name": "xev0_rate_err", "idx": "2,3", "min": "0", "max": "4Mcps", "help": "2-sigma error of the counter_0 rate"}
        ],
        "bank_1": [
            {"name": "run_time", "idx": "0", "min": "0", "max": "", "help": "Run time since last 'clear_statistics'"},
            {"name": "dead_time", "idx": "3", "min": "0", "max": "0", "help": "Dead time since last 'clear_statistics'"},
            {"name": "event_rate", "idx": "1", "min": "0", "max": "4Mcps", "help": "Histogramming rate, cumulative since last 'clear_statistics'"},
            {"name": "event_rate_err", "idx": "1", "min": "0", "max": "4Mcps", "help": "2-sigma error of the histogramming rate"},
            {"name": "trigger_rate", "idx": "2", "min": "0", "max": "4Mcps", "help": "Rate of recognized triggers, cumulative since last 'clear_statistics'"},
            {"name": "trigger_rate_err", "idx": "2", "min": "0", "max": "4Mcps", "help": "2-sigma error of the rate of recognized triggers"},
            {"name": "pulse_rate", "idx": "2,3", "min": "0", "max": "4Mcps", "help": "Estimated true pulse rate, cumulative since last 'clear_statistics'"},
            {"name": "pulse_rate_err", "idx": "2,3", "min": "0", "max": "4Mcps", "help": "2-sigma error of the estimated true pulse rate"},
            {"name": "xev0_rate", "idx": "2,3", "min": "0", "max": "4Mcps", "help": "External count rate; counter 0"},
            {"name": "xev0_rate_err", "idx": "2,3", "min": "0", "max": "4Mcps", "help": "2-sigma error of the counter_0 rate"}
        ]
    }
}